# 하둡 기초

## 하둡 설치

* 자바 설치된 상태에서

  ``` bash
  # 방화벽 해제
  $ systemctl stop firewalld
  $ systemctl disable firewall
  # ~/.ssh 폴더 확인
  $ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa
  $ ls .ssh
  id_dsa	id_dsa.pub
  $ cd .ssh
  $ cat id_dsa.pub >> authorized_keys
  $ ssh hadoopserver
  
  #하둡 설치
  $ wget https://archive.apache.org/dist/hadoop/common/hadoop-1.2.1/hadoop-1.2.1.tar.gz
  $ tar xvf
  $ cp -r ... /usr/local
  $ vi /etc/profile
  	HADOOP_HOME=/usr/loca/hadoop-1.2.1
  	export HADOOP_HOME 추가
  	PATH $HADOOP_HOME/bin:.::$PATH:.
  ```

* config

  ```bash
  $ pwd 
  /usr/local/hadoop-1.2.1/conf
  $ vi core-site.xml
  <configuration>
  	<property>
  		<name>fs.default.name</name>
  		<value>hdfs://localhost:9000</value>
  	</property>
  	<property>
  		<name>hadoop.tmp.dir</name>
  		<value>/usr/local/hadoop-1.2.1/tmp</value>
  	</property>
  </configuration>
  
  $vi hdfs-site.xml
  <configuration>
  	<property>
  		<name>dfs.replication</name>
  		<value>1</value> 
  	</property>
  	<property>
  		<name>dfs.webhdfs.enabled</name>
  		<value>true</value>
  	</property>
  	<property>
  		<name>dfs.name.dir</name>
  		<value>/usr/local/hadoop-1.2.1/name</value>
  	</property>
  	<property>
  		<name>dfs.data.dir</name>
  		<value>/usr/local/hadoop-1.2.1/data</value>
  	</property>
  </configuration>
  
  $ vi mapred-site.xml
  <configuration>
  	<property>
  		<name>mapred.job.tracker</name>
  		<value>localhost:9001</value>
  	</property>
  </configuration>
  
  $ vi hadoop.env.sh
  export JAVA_HOME=/usr/local/jdk1.8.0
  export HADOOP_HOME_WARN_SUPPRESS="TRUE"
  ```

* 하둡 실행

  ```bash
  $ hadoop namenode -format
  $ start-all.sh
  # /usr/local/hadoop... 에 name, data, tmp폴더 확인
  
  # http://hadoopserver:50070 접속
  ```

* hadoop fs (p.63)

  ```bash
  $ pwd
  /usr/local/hadoop-1.2.1
  $ hadoop fs -ls /usr
  Found 1 items
  drwsr-xr-x	-	root	supergroup	0	2020-09-22	16:05	/usr/local
  $ hadoop fs -mkdir /test
  $ hadoop fs -put README.txt /test
  $ hadoop jar hadoop-examples-1.2.1.jar wordcount /test /output
  	# wordcount클래스  input(/test) output(/result)
  	# output 폴더 자동 생성
  ```

  